{"version":3,"file":"XtxGuess.js","sources":["../../../../src/components/XtxGuess.vue","../../../../uniComponent:/L1VzZXJzL2xqaC9EZXNrdG9wL3VuaWFwcC12MytUcy1zaG9wL3NyYy9jb21wb25lbnRzL1h0eEd1ZXNzLnZ1ZQ"],"sourcesContent":["<script setup lang=\"ts\">\nimport { reactive, ref } from \"vue\";\nimport { getHomeGoodsGuessLikeAPI } from \"@/services/home\";\nimport { onMounted } from \"vue\";\nimport type { GuessItem } from \"@/types/home\";\nimport type { PageParams, PageResult } from \"@/types/global\";\n\n// 猜你喜欢的数据\nconst GoodsGuess = ref<GuessItem[]>([]);\n\n// 已经结束的标记\nconst finish = ref(false);\n\n// 分页参数 利用 required 这个ts工具函数 将你定义的时候是可选的转化为必选\nconst pageParams: Required<PageParams> = {\n  page: 1,\n  pageSize: 10,\n};\n\n// 获取猜你喜欢数据\nconst getHomeGoodsGuessLikeData = async () => {\n  // 加上一个退出判断，判断依据就是finish是否为true\n  if (finish.value) {\n    return uni.showToast({ icon: \"none\", title: \"没有更多数据啦\" });\n  }\n  const res = await getHomeGoodsGuessLikeAPI(pageParams);\n  GoodsGuess.value.push(...res.result.items);\n  if (pageParams.page < (res.result.pages as number)) pageParams.page++;\n  else {\n    finish.value = true;\n  }\n};\n\n// 重置数据\nconst resetData = () => {\n  pageParams.page = 1;\n  GoodsGuess.value = [];\n  finish.value = false;\n};\n\n// 组件挂载完毕\nonMounted(() => {\n  getHomeGoodsGuessLikeData();\n});\n\n// 暴露方法\ndefineExpose({\n  resetData,\n  getMore: getHomeGoodsGuessLikeData,\n});\n</script>\n\n<template>\n  <!-- 猜你喜欢 -->\n  <view class=\"caption\">\n    <text class=\"text\">猜你喜欢</text>\n  </view>\n  <view class=\"guess\">\n    <navigator\n      class=\"guess-item\"\n      v-for=\"item in GoodsGuess\"\n      :key=\"item.id\"\n      :url=\"`/pages/goods/goods?id=${item.id}`\"\n    >\n      <image class=\"image\" mode=\"aspectFill\" :src=\"item.picture\"></image>\n      <view class=\"name\">\n        {{ item.desc }}\n      </view>\n      <view class=\"price\">\n        <text class=\"small\">¥</text>\n        <text>{{ item.price }}</text>\n      </view>\n    </navigator>\n  </view>\n  <view class=\"loading-text\"\n    >{{ finish ? \"没有更多数据啦\" : \" 正在加载...\" }}\n  </view>\n</template>\n\n<style lang=\"scss\">\n:host {\n  display: block;\n}\n/* 分类标题 */\n.caption {\n  display: flex;\n  justify-content: center;\n  line-height: 1;\n  padding: 36rpx 0 40rpx;\n  font-size: 32rpx;\n  color: #262626;\n  .text {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 28rpx 0 30rpx;\n\n    &::before,\n    &::after {\n      content: \"\";\n      width: 20rpx;\n      height: 20rpx;\n      background-image: url(@/static/images/bubble.png);\n      background-size: contain;\n      margin: 0 10rpx;\n    }\n  }\n}\n\n/* 猜你喜欢 */\n.guess {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding: 0 20rpx;\n  .guess-item {\n    width: 345rpx;\n    padding: 24rpx 20rpx 20rpx;\n    margin-bottom: 20rpx;\n    border-radius: 10rpx;\n    overflow: hidden;\n    background-color: #fff;\n  }\n  .image {\n    width: 304rpx;\n    height: 304rpx;\n  }\n  .name {\n    height: 75rpx;\n    margin: 10rpx 0;\n    font-size: 26rpx;\n    color: #262626;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n  }\n  .price {\n    line-height: 1;\n    padding-top: 4rpx;\n    color: #cf4444;\n    font-size: 26rpx;\n  }\n  .small {\n    font-size: 80%;\n  }\n}\n// 加载提示文字\n.loading-text {\n  text-align: center;\n  font-size: 28rpx;\n  color: #666;\n  padding: 20rpx 0;\n}\n</style>\n","import Component from '/Users/ljh/Desktop/uniapp-v3+Ts-shop/src/components/XtxGuess.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getHomeGoodsGuessLikeAPI","onMounted"],"mappings":";;;;;;;;;AAQM,UAAA,aAAaA,kBAAiB,CAAA,CAAE;AAGhC,UAAA,SAASA,kBAAI,KAAK;AAGxB,UAAM,aAAmC;AAAA,MACvC,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAIZ,UAAM,4BAA4B,YAAY;AAE5C,UAAI,OAAO,OAAO;AAChB,eAAOC,cAAAA,MAAI,UAAU,EAAE,MAAM,QAAQ,OAAO,WAAW;AAAA,MACzD;AACM,YAAA,MAAM,MAAMC,uCAAyB,UAAU;AACrD,iBAAW,MAAM,KAAK,GAAG,IAAI,OAAO,KAAK;AACrC,UAAA,WAAW,OAAQ,IAAI,OAAO;AAA6B,mBAAA;AAAA,WAC1D;AACH,eAAO,QAAQ;AAAA,MACjB;AAAA,IAAA;AAIF,UAAM,YAAY,MAAM;AACtB,iBAAW,OAAO;AAClB,iBAAW,QAAQ;AACnB,aAAO,QAAQ;AAAA,IAAA;AAIjBC,kBAAAA,UAAU,MAAM;AACY;IAAA,CAC3B;AAGY,WAAA;AAAA,MACX;AAAA,MACA,SAAS;AAAA,IAAA,CACV;;;;;;;;;;;;;;;;;;AChDD,GAAG,gBAAgB,SAAS;"}