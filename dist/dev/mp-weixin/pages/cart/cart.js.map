{"version":3,"file":"cart.js","sources":["../../../../../src/pages/cart/cart.vue","../../../../../uniPage:/cGFnZXMvY2FydC9jYXJ0LnZ1ZQ"],"sourcesContent":["<!-- 静态数据演示版本 适合任何后端 -->\n<template>\n  <view class=\"app\">\n    <button @click=\"openSkuPopup()\">打开SKU组件</button>\n\n    <vk-data-goods-sku-popup\n      ref=\"skuPopup\"\n      v-model=\"skuKey\"\n      border-radius=\"20\"\n      :localdata=\"goodsInfo\"\n      :mode=\"skuMode\"\n      @open=\"onOpenSkuPopup\"\n      @close=\"SkuPopup\"\n      @add-cart=\"addCart\"\n      @buy-now=\"buyNow\"\n    ></vk-data-goods-sku-popup>\n  </view>\n</template>\n\n<script>\nvar that; // 当前页面对象\nexport default {\n  data() {\n    return {\n      // 是否打开SKU弹窗\n      skuKey: false,\n      // SKU弹窗模式\n      skuMode: 1,\n      // 后端返回的商品信息\n      goodsInfo: {},\n    };\n  },\n  // 监听 - 页面每次【加载时】执行(如：前进)\n  onLoad(options) {\n    that = this;\n    that.init(options);\n  },\n  methods: {\n    // 初始化\n    init(options = {}) {},\n    // 获取商品信息，并打开sku弹出\n    openSkuPopup() {\n      /**\n       * 获取商品信息\n       * 这里可以看到每次打开SKU都会去重新请求商品信息,为的是每次打开SKU组件可以实时看到剩余库存\n       */\n      // 此处写接口请求，并将返回的数据进行处理成goodsInfo的数据格式，\n      // goodsInfo是后端返回的数据\n      this.goodsInfo = {\n        _id: \"002\",\n        name: \"迪奥香水\",\n        goods_thumb:\n          \"https://res.lancome.com.cn/resources/2020/9/11/15998112890781924_920X920.jpg?version=20200917220352530\",\n        sku_list: [\n          {\n            _id: \"004\",\n            goods_id: \"002\",\n            goods_name: \"迪奥香水\",\n            image:\n              \"https://res.lancome.com.cn/resources/2020/9/11/15998112890781924_920X920.jpg?version=20200917220352530\",\n            price: 19800,\n            sku_name_arr: [\"50ml/瓶\"],\n            stock: 100,\n          },\n          {\n            _id: \"005\",\n            goods_id: \"002\",\n            goods_name: \"迪奥香水\",\n            image:\n              \"https://res.lancome.com.cn/resources/2020/9/11/15998112890781924_920X920.jpg?version=20200917220352530\",\n            price: 9800,\n            sku_name_arr: [\"70ml/瓶\"],\n            stock: 100,\n          },\n        ],\n        spec_list: [\n          {\n            list: [\n              {\n                name: \"20ml/瓶\",\n              },\n              {\n                name: \"50ml/瓶\",\n              },\n              {\n                name: \"70ml/瓶\",\n              },\n            ],\n            name: \"规格\",\n          },\n        ],\n      };\n      that.skuKey = true;\n    },\n    // sku组件 开始-----------------------------------------------------------\n    onOpenSkuPopup() {\n      console.log(\"监听 - 打开sku组件\");\n    },\n    SkuPopup() {\n      console.log(\"监听 - 关闭sku组件\");\n    },\n    // 加入购物车前的判断\n    addCartFn(obj) {\n      let { selectShop } = obj;\n      // 模拟添加到购物车,请替换成你自己的添加到购物车逻辑\n      let res = {};\n      let name = selectShop.goods_name;\n      if (selectShop.sku_name != \"默认\") {\n        name += \"-\" + selectShop.sku_name_arr;\n      }\n      res.msg = `${name} 已添加到购物车`;\n      if (typeof obj.success == \"function\") obj.success(res);\n    },\n    // 加入购物车按钮\n    addCart(selectShop) {\n      console.log(\"监听 - 加入购物车\");\n      that.addCartFn({\n        selectShop: selectShop,\n        success: function (res) {\n          // 实际业务时,请替换自己的加入购物车逻辑\n          that.toast(res.msg);\n          setTimeout(function () {\n            that.skuKey = false;\n          }, 300);\n        },\n      });\n    },\n    // 立即购买\n    buyNow(selectShop) {\n      console.log(\"监听 - 立即购买\");\n      that.addCartFn({\n        selectShop: selectShop,\n        success: function (res) {\n          // 实际业务时,请替换自己的立即购买逻辑\n          that.toast(\"立即购买\");\n        },\n      });\n    },\n    toast(msg) {\n      uni.showToast({\n        title: msg,\n        icon: \"none\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.app {\n  padding: 30rpx;\n  font-size: 28rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/ljh/Desktop/uniapp-v3+Ts-shop/src/pages/cart/cart.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAoBA,IAAI;AACJ,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA;AAAA,MAEL,QAAQ;AAAA;AAAA,MAER,SAAS;AAAA;AAAA,MAET,WAAW,CAAE;AAAA;EAEhB;AAAA;AAAA,EAED,OAAO,SAAS;AACd,WAAO;AACP,SAAK,KAAK,OAAO;AAAA,EAClB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,KAAK,UAAU,CAAA,GAAI;AAAA,IAAE;AAAA;AAAA,IAErB,eAAe;AAOb,WAAK,YAAY;AAAA,QACf,KAAK;AAAA,QACL,MAAM;AAAA,QACN,aACE;AAAA,QACF,UAAU;AAAA,UACR;AAAA,YACE,KAAK;AAAA,YACL,UAAU;AAAA,YACV,YAAY;AAAA,YACZ,OACE;AAAA,YACF,OAAO;AAAA,YACP,cAAc,CAAC,QAAQ;AAAA,YACvB,OAAO;AAAA,UACR;AAAA,UACD;AAAA,YACE,KAAK;AAAA,YACL,UAAU;AAAA,YACV,YAAY;AAAA,YACZ,OACE;AAAA,YACF,OAAO;AAAA,YACP,cAAc,CAAC,QAAQ;AAAA,YACvB,OAAO;AAAA,UACR;AAAA,QACF;AAAA,QACD,WAAW;AAAA,UACT;AAAA,YACE,MAAM;AAAA,cACJ;AAAA,gBACE,MAAM;AAAA,cACP;AAAA,cACD;AAAA,gBACE,MAAM;AAAA,cACP;AAAA,cACD;AAAA,gBACE,MAAM;AAAA,cACP;AAAA,YACF;AAAA,YACD,MAAM;AAAA,UACP;AAAA,QACF;AAAA;AAEH,WAAK,SAAS;AAAA,IACf;AAAA;AAAA,IAED,iBAAiB;AACf,cAAQ,IAAI,cAAc;AAAA,IAC3B;AAAA,IACD,WAAW;AACT,cAAQ,IAAI,cAAc;AAAA,IAC3B;AAAA;AAAA,IAED,UAAU,KAAK;AACb,UAAI,EAAE,eAAe;AAErB,UAAI,MAAM,CAAA;AACV,UAAI,OAAO,WAAW;AACtB,UAAI,WAAW,YAAY,MAAM;AAC/B,gBAAQ,MAAM,WAAW;AAAA,MAC3B;AACA,UAAI,MAAM,GAAG,IAAI;AACjB,UAAI,OAAO,IAAI,WAAW;AAAY,YAAI,QAAQ,GAAG;AAAA,IACtD;AAAA;AAAA,IAED,QAAQ,YAAY;AAClB,cAAQ,IAAI,YAAY;AACxB,WAAK,UAAU;AAAA,QACb;AAAA,QACA,SAAS,SAAU,KAAK;AAEtB,eAAK,MAAM,IAAI,GAAG;AAClB,qBAAW,WAAY;AACrB,iBAAK,SAAS;AAAA,UACf,GAAE,GAAG;AAAA,QACP;AAAA,MACH,CAAC;AAAA,IACF;AAAA;AAAA,IAED,OAAO,YAAY;AACjB,cAAQ,IAAI,WAAW;AACvB,WAAK,UAAU;AAAA,QACb;AAAA,QACA,SAAS,SAAU,KAAK;AAEtB,eAAK,MAAM,MAAM;AAAA,QAClB;AAAA,MACH,CAAC;AAAA,IACF;AAAA,IACD,MAAM,KAAK;AACTA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAAA,IACF;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;AChJA,GAAG,WAAW,eAAe;"}